#!/bin/sh

if [ "$(whoami)" != "root" ]; then
  echo "The script require root privilege to execute properly.  Current identity: $(whoami)"
  exit 1
fi

SRC="$PWD"
DST=/usr/include/Compound
PROJ=("Array" "Paper" "Pen" "Render" "Status" "Var" "MemMan" "Stack" "Utils"\
      "String" "Object")

# Create directory.
if [ ! -d "$DST" ]; then
  mkdir -pv "$DST"
fi

# Install project-like headers.
PROJLEN=${#PROJ[*]}
echo "======== $PROJLEN projects in total ========"

idx=0
while :; do
  if [[ $idx -eq $PROJLEN || $idx -gt $PROJLEN ]]; then
    break;
  fi
  
  p="${PROJ[$idx]}"
  
  cd "$p"
  echo "`date` >>> Installing $p"
  cp -v include/*.h "$DST"
  cd "$SRC"
  ((idx++))
  echo
done

# Install individual headers.
cp -v "common.h" "const.h" "platform.h"\
      "name.h" "namescope.h" "type.h" "catlog.h"\
      "attr.h" "registry.h" "class.h" "function.h" "$DST"

printf "\nDone\n"
